((e,o)=>{"function"==typeof define&&define.amd?define([],o):"object"==typeof module&&module.exports?module.exports=o():e.Rellax=o()})("undefined"!=typeof window?window:global,function(){function p(e,o){var u=Object.create(p.prototype),r=0,f=0,i=0,w=0,h=[],x=!0,t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},n=null,l=window.cancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout,s=window.transformProp||(()=>{var e=document.createElement("div");if(null===e.style.transform){var o,t=["Webkit","Moz","ms"];for(o in t)if(void 0!==e.style[t[o]+"Transform"])return t[o]+"Transform"}return"transform"})();if(u.options={speed:-2,center:!1,wrapper:null,relativeToWrapper:!1,round:!0,vertical:!0,horizontal:!1,callback:function(){}},o&&Object.keys(o).forEach(function(e){u.options[e]=o[e]}),0<(e="string"==typeof(e=e||".rellax")?document.querySelectorAll(e):[e]).length){if(u.elems=e,u.options.wrapper&&!u.options.wrapper.nodeType){if(!(e=document.querySelector(u.options.wrapper)))return void console.warn("Rellax: The wrapper you're trying to use doesn't exist.");u.options.wrapper=e}var y=function(){for(var e=0;e<h.length;e++)u.elems[e].style.cssText=h[e].style;for(h=[],f=window.innerHeight,w=window.innerWidth,g(),e=0;e<u.elems.length;e++){var o=u.elems[e],t=o.getAttribute("data-rellax-percentage"),n=o.getAttribute("data-rellax-speed"),r=o.getAttribute("data-rellax-zindex")||0,i=o.getAttribute("data-rellax-min"),l=o.getAttribute("data-rellax-max"),s=u.options.wrapper?u.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,a=(u.options.relativeToWrapper&&(s=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)-u.options.wrapper.offsetTop),u.options.vertical&&(t||u.options.center)?s:0),p=u.options.horizontal&&(t||u.options.center)?u.options.wrapper?u.options.wrapper.scrollLeft:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0,s=a+o.getBoundingClientRect().top,d=o.clientHeight||o.offsetHeight||o.scrollHeight,c=p+o.getBoundingClientRect().left,m=o.clientWidth||o.offsetWidth||o.scrollWidth,a=t||(a-s+f)/(d+f),t=t||(p-c+w)/(m+w);u.options.center&&(a=t=.5),n=n||u.options.speed,t=v(t,a,n),a="",0<=(o=o.style.cssText).indexOf("transform")&&(a=o.indexOf("transform"),a=(p=(a=o.slice(a)).indexOf(";"))?" "+a.slice(11,p).replace(/\s/g,""):" "+a.slice(11).replace(/\s/g,"")),h.push({baseX:t.x,baseY:t.y,top:s,left:c,height:d,width:m,speed:n,style:o,transform:a,zindex:r,min:i,max:l})}x&&(window.addEventListener("resize",y),x=!1),b()},g=function(){var e=r,o=i;return r=u.options.wrapper?u.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset,i=u.options.wrapper?u.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset,!!(e!=(r=u.options.relativeToWrapper?((document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset)-u.options.wrapper.offsetTop:r)&&u.options.vertical||o!=i&&u.options.horizontal)},v=function(e,o,t){var n={};return e=100*t*(1-e),o=100*t*(1-o),n.x=u.options.round?Math.round(e):Math.round(100*e)/100,n.y=u.options.round?Math.round(o):Math.round(100*o)/100,n},a=function(){g()&&!1===x&&b(),n=t(a)},b=function(){for(var e=0;e<u.elems.length;e++){var o,t=(o=v((i-h[e].left+w)/(h[e].width+w),(r-h[e].top+f)/(h[e].height+f),h[e].speed)).y-h[e].baseY,n=o.x-h[e].baseX;null!==h[e].min&&(u.options.vertical&&!u.options.horizontal&&(t=t<=h[e].min?h[e].min:t),u.options.horizontal)&&!u.options.vertical&&(n=n<=h[e].min?h[e].min:n),null!==h[e].max&&(u.options.vertical&&!u.options.horizontal&&(t=t>=h[e].max?h[e].max:t),u.options.horizontal)&&!u.options.vertical&&(n=n>=h[e].max?h[e].max:n),u.elems[e].style[s]="translate3d("+(u.options.horizontal?n:"0")+"px,"+(u.options.vertical?t:"0")+"px,"+h[e].zindex+"px) "+h[e].transform}u.options.callback(o)};return u.destroy=function(){for(var e=0;e<u.elems.length;e++)u.elems[e].style.cssText=h[e].style;x||(window.removeEventListener("resize",y),x=!0),l(n),n=null},y(),a(),u.refresh=y,u}console.warn("Rellax: The elements you're trying to select don't exist.")}return p});